<!DOCTYPE html>
<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<head>
<title>Page Title</title>
<style>
.myDivHeader {
  border: 5px outset red;
  background-color: lightblue;
  text-align: center;
}
.myDivChart {
  border: 5px outset black;
  background-color: white;
  text-align: center;
}
.myDivBarChart {
  border: 5px outset green;
  background-color: white;
  text-align: center;

}
circle {fill: lightblue; stroke: black;} 
rect {fill: lightblue; stroke: black; }
</style>
</head>

<body onload='init()'>

<div class="myDivHeader">
  <h2>Visualization of Covid Cases in United States by STATE and County</h2>
  <p> Select the states to see the trends</p>
</div>

<div class="myDivChart">
  <h2>This is for chart </h2>
  <p> Chart details</p>
  <svg width=300 height=300>
  </svg>
  <script>
    async function init() {
    const data = await d3.csv('https://flunky.github.io/cars2017.csv');
    tvals = [10,20,50,100]
    xs = d3.scaleLog().domain([10,150]).range([0,200]);
    ys = d3.scaleLog().domain([10,150]).range([200,0]);
    zs = d3.scaleLinear().domain([0,200]).range([0,200]);
    d3.select("svg")
      .append("g").attr("transform","translate(50,50)")
      .selectAll("circle")
      .data(data)
      .enter()
      .append("circle")
      .attr("cx", function(d) {return (xs(d.AverageCityMPG))} )
      .attr("cy", function(d) {return (ys(d.AverageHighwayMPG))} )
      .attr("r", function(d) {return (2 + zs(d.EngineCylinders))} );
    d3.select("svg").append("g")
      .attr("transform","translate(50,50)")
      .call(d3.axisLeft(ys).tickValues(tvals).tickFormat(d3.format("~s")));
    d3.select("svg").append("g")
      .attr("transform","translate(50,250)")
      .call(d3.axisBottom(xs).tickValues(tvals).tickFormat(d3.format("~s")));

      }
  </script>
</div>

<div class=  myDivBarChart>
  <h2>This is for Bar chart </h2>
  <svg width=300 height=300>
  
    <script>
    var data = [4,8,15,16,23,42];
    xs = d3.scaleBand().domain([0,1,2,3,4,5]).range([0,200]);
    ys = d3.scaleLinear().domain([0,42]).range([200,0]);
    d3.select(".myDivBarChart").select("svg").append("g")
      .attr("transform","translate(50,50)")
      .call(d3.axisLeft(ys));
    d3.select(".myDivBarChart").select("svg").append("g")
      .attr("transform","translate(50,250)")
      .call(d3.axisBottom(xs));
    d3.select(".myDivBarChart").select("svg")
      .append('g').attr("transform","translate(50,50)")
      .selectAll('rect')
      .data(data)
      .enter()
      .append('rect')
        .attr('x',function(d,i) {return xs(i)})
        .attr('y',function(d,i) {return ys(d)})
        .attr('width',xs.bandwidth())
        .attr('height',function(d,i) {return (200 - ys(d))});    
    </script>
  </svg>
</div>


</body>
</html>